(this["webpackJsonpco-lab"]=this["webpackJsonpco-lab"]||[]).push([[0],{54:function(e,t,n){},86:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(46),s=n.n(o),i=(n(54),n(28)),a=n(49),u=n(47),j=n.n(u),l=n(1),b=j()(),d=Object(c.createContext)(),h=function(e){var t=e.children;return Object(l.jsx)(d.Provider,{value:{socket:b},children:t})},O=n(12),f=Object(c.createContext)(),p=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(O.a)(n,2),o=r[0],s=r[1],i=Object(c.useCallback)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&s(e.user)})).catch((function(e){console.log("not logged in")}))}),[]);return Object(c.useEffect)(i,[]),Object(l.jsx)(f.Provider,{value:{user:o,setUser:s},children:t})},g=(n(86),n(2)),x=function(){var e=Object(c.useContext)(f).setUser,t=Object(g.g)();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Landing Page"}),Object(l.jsx)("p",{children:"logged in"}),Object(l.jsx)("button",{onClick:function(){console.log("loging out"),fetch("/api/logout").then((function(e){return e.json()})).then((function(n){var c=n.user;n.success&&(e(c),t.push("/login"))}))},children:"logout"})]})},v=n(13),m=function(){var e=Object(g.g)(),t=Object(c.useContext)(f),n=t.user,r=t.setUser,o=Object(c.useState)(""),s=Object(O.a)(o,2),i=s[0],a=s[1],u=Object(c.useState)(""),j=Object(O.a)(u,2),b=j[0],d=j[1];return n?Object(l.jsx)(g.a,{to:"/"}):Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:i,password:b})}).then((function(e){return e.json()})).then((function(t){var n=t.code,c=t.user;"ok"===n?(r(c),e.push("/")):alert("username/password did not match")})).catch((function(e){alert("something went wrong"),console.log(e)}))},children:[Object(l.jsx)("input",{onChange:function(e){return a(e.target.value)},value:i,type:"text",placeholder:"username",required:!0}),Object(l.jsx)("input",{onChange:function(e){return d(e.target.value)},value:b,type:"password",placeholder:"password",required:!0}),Object(l.jsx)("button",{type:"submit",children:"Login"})]}),Object(l.jsx)(v.b,{to:"/register",children:"Register"})]})},C=function(){var e=Object(g.g)(),t=Object(c.useContext)(f).setUser,n=Object(c.useState)(""),r=Object(O.a)(n,2),o=r[0],s=r[1],i=Object(c.useState)(""),a=Object(O.a)(i,2),u=a[0],j=a[1],b=Object(c.useState)(""),d=Object(O.a)(b,2),h=d[0],p=d[1],x=Object(c.useState)(""),m=Object(O.a)(x,2),C=m[0],w=m[1];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),fetch("/api/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:o,username:u,email:h,pass:C})}).then((function(e){return e.json()})).then((function(n){var c=n.code,r=n.user,o=n.field;"ok"===c?(t(r),e.push("/")):11e3===c?alert("".concat(o," exists")):alert("something went wrong")})).catch((function(e){console.log(e),alert("something went wrong")}))},autoComplete:"off",children:[Object(l.jsx)("input",{onChange:function(e){return j(e.target.value)},value:u,type:"text",placeholder:"username",required:!0,autoComplete:"off"}),Object(l.jsx)("input",{onChange:function(e){return s(e.target.value)},value:o,type:"text",placeholder:"name",required:!0}),Object(l.jsx)("input",{onChange:function(e){return p(e.target.value)},value:h,type:"email",placeholder:"email",required:!0}),Object(l.jsx)("input",{onChange:function(e){return w(e.target.value)},value:C,type:"password",placeholder:"password",required:!0,autoComplete:"new-password"}),Object(l.jsx)("button",{type:"submit",children:"Register"})]}),Object(l.jsx)(v.b,{to:"/login",children:"Login"})]})};function w(){var e=.01*window.innerHeight;document.body.style.setProperty("--vh","".concat(e,"px"))}function y(e){var t=e.children,n=Object(a.a)(e,["children"]),r=Object(c.useContext)(f).user;return Object(l.jsx)(g.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(l.jsx)(g.a,{to:{pathname:"/login",state:{from:n}}})}}))}var S=function(){return Object(c.useEffect)((function(){window.addEventListener("resize",(function(){return w()})),w()}),[]),Object(l.jsx)(v.a,{children:Object(l.jsxs)(g.d,{children:[Object(l.jsx)(g.b,{path:"/login",children:Object(l.jsx)(m,{})}),Object(l.jsx)(g.b,{path:"/register",children:Object(l.jsx)(C,{})}),Object(l.jsx)(y,{path:"/",children:Object(l.jsx)(x,{})})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(p,{children:Object(l.jsx)(h,{children:Object(l.jsx)(S,{})})})}),document.getElementById("root")),k()}},[[91,1,2]]]);
//# sourceMappingURL=main.a31beece.chunk.js.map